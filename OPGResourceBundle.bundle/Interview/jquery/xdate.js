var XDate=function(a,b,c,d){function e(){var h,b=this instanceof e?this:new e,c=arguments,d=c.length;if("boolean"==typeof c[d-1]&&(h=c[--d],c=y(c,0,d)),d)if(1==d){if(d=c[0],d instanceof a||"number"==typeof d)b[0]=new a(+d);else if(d instanceof e){var c=b,i=new a(+d[0]);f(d)&&(i.toString=G),c[0]=i}else if("string"==typeof d){b[0]=new a(0);a:{for(var k,c=d,d=h||!1,i=e.parsers,j=0;j<i.length;j++)if(k=i[j](c,d,b)){b=k;break a}b[0]=new a(c)}}}else b[0]=new a(F.apply(a,c)),h||(b[0]=u(b[0]));else b[0]=new a;return"boolean"==typeof h&&g(b,h),b}function f(a){return a[0].toString===G}function g(b,c,d){return c?f(b)||(d&&(b[0]=new a(F(b[0].getFullYear(),b[0].getMonth(),b[0].getDate(),b[0].getHours(),b[0].getMinutes(),b[0].getSeconds(),b[0].getMilliseconds()))),b[0].toString=G):f(b)&&(b[0]=d?u(b[0]):new a(+b[0])),b}function h(a,b,c,d,e){var f=x(s,a[0],e),a=x(t,a[0],e),e=1==b?c%12:f(1),g=!1;2==d.length&&"boolean"==typeof d[1]&&(g=d[1],d=[c]),a(b,d),g&&f(1)!=e&&(a(1,[f(1)-1]),a(2,[v(f(0),f(1))]))}function i(a,c,d,e){var d=Number(d),f=b.floor(d);a["set"+B[c]](a["get"+B[c]]()+f,e||!1),f!=d&&6>c&&i(a,c+1,(d-f)*D[c],e)}function j(a,c,d){var a=a.clone().setUTCMode(!0,!0),c=e(c).setUTCMode(!0,!0),f=0;if(0==d||1==d){for(var g=6;g>=d;g--)f/=D[g],f+=s(c,!1,g)-s(a,!1,g);1==d&&(f+=12*(c.getFullYear()-a.getFullYear()))}else 2==d?(d=a.toDate().setUTCHours(0,0,0,0),f=c.toDate().setUTCHours(0,0,0,0),f=b.round((f-d)/864e5)+(c-f-(a-d))/864e5):f=(c-a)/[36e5,6e4,1e3,1][d-3];return f}function k(c){var d=c(0),e=c(1),c=c(2),e=new a(F(d,e,c)),f=l(d),c=f;return f>e?c=l(d-1):(d=l(d+1),e>=d&&(c=d)),b.floor(b.round((e-c)/864e5)/7)+1}function l(b){return b=new a(F(b,0,4)),b.setUTCDate(b.getUTCDate()-(b.getUTCDay()+6)%7),b}function m(a,b,c,e){var f=x(s,a,e),g=x(t,a,e),c=l(c===d?f(0):c);e||(c=u(c)),a.setTime(+c),g(2,[f(2)+7*(b-1)])}function n(a,b,c,d,f){var g=e.locales,h=g[e.defaultLocale]||{},i=x(s,a,f),c=("string"==typeof c?g[c]:c)||{};return o(a,b,function(a){if(d)for(var b=(7==a?2:a)-1;b>=0;b--)d.push(i(b));return i(a)},function(a){return c[a]||h[a]},f)}function o(a,b,c,e,f){for(var g,h,i="";g=b.match(E);){if(i+=b.substr(0,g.index),g[1]){h=i;for(var i=a,j=g[1],k=c,l=e,m=f,n=j.length,q=void 0,r="";n>0;)q=p(i,j.substr(0,n),k,l,m),q!==d?(r+=q,j=j.substr(n),n=j.length):n--;i=h+(r+j)}else g[3]?(h=o(a,g[4],c,e,f),parseInt(h.replace(/\D/g,""),10)&&(i+=h)):i+=g[7]||"'";b=b.substr(g.index+g[0].length)}return i+b}function p(a,c,d,f,g){var h=e.formatters[c];if("string"==typeof h)return o(a,h,d,f,g);if("function"==typeof h)return h(a,g||!1,f);switch(c){case"fff":return A(d(6),3);case"s":return d(5);case"ss":return A(d(5));case"m":return d(4);case"mm":return A(d(4));case"h":return d(3)%12||12;case"hh":return A(d(3)%12||12);case"H":return d(3);case"HH":return A(d(3));case"d":return d(2);case"dd":return A(d(2));case"ddd":return f("dayNamesShort")[d(7)]||"";case"dddd":return f("dayNames")[d(7)]||"";case"M":return d(1)+1;case"MM":return A(d(1)+1);case"MMM":return f("monthNamesShort")[d(1)]||"";case"MMMM":return f("monthNames")[d(1)]||"";case"yy":return(d(0)+"").substring(2);case"yyyy":return d(0);case"t":return q(d,f).substr(0,1).toLowerCase();case"tt":return q(d,f).toLowerCase();case"T":return q(d,f).substr(0,1);case"TT":return q(d,f);case"z":case"zz":case"zzz":return g?c="Z":(f=a.getTimezoneOffset(),a=0>f?"+":"-",d=b.floor(b.abs(f)/60),f=b.abs(f)%60,g=d,"zz"==c?g=A(d):"zzz"==c&&(g=A(d)+":"+A(f)),c=a+g),c;case"w":return k(d);case"ww":return A(k(d));case"S":return c=d(2),c>10&&20>c?"th":["st","nd","rd"][c%10-1]||"th"}}function q(a,b){return a(3)<12?b("amDesignator"):b("pmDesignator")}function r(a){return!isNaN(+a[0])}function s(a,b,c){return a["get"+(b?"UTC":"")+B[c]]()}function t(a,b,c,d){a["set"+(b?"UTC":"")+B[c]].apply(a,d)}function u(b){return new a(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds())}function v(b,c){return 32-new a(F(b,c,32)).getUTCDate()}function w(a){return function(){return a.apply(d,[this].concat(y(arguments)))}}function x(a){var b=y(arguments,1);return function(){return a.apply(d,b.concat(y(arguments)))}}function y(a,b,e){return c.prototype.slice.call(a,b||0,e===d?a.length:e)}function z(a,b){for(var c=0;c<a.length;c++)b(a[c],c)}function A(a,b){for(b=b||2,a+="";a.length<b;)a="0"+a;return a}var B="FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds,Day,Year".split(","),C=["Years","Months","Days"],D=[12,31,24,60,60,1e3,1],E=/(([a-zA-Z])\2*)|(\((('.*?'|\(.*?\)|.)*?)\))|('(.*?)')/,F=a.UTC,G=a.prototype.toUTCString,H=e.prototype;return H.length=1,H.splice=c.prototype.splice,H.getUTCMode=w(f),H.setUTCMode=w(g),H.getTimezoneOffset=function(){return f(this)?0:this[0].getTimezoneOffset()},z(B,function(a,b){H["get"+a]=function(){return s(this[0],f(this),b)},8!=b&&(H["getUTC"+a]=function(){return s(this[0],!0,b)}),7!=b&&(H["set"+a]=function(a){return h(this,b,a,arguments,f(this)),this},8!=b&&(H["setUTC"+a]=function(a){return h(this,b,a,arguments,!0),this},H["add"+(C[b]||a)]=function(a,c){return i(this,b,a,c),this},H["diff"+(C[b]||a)]=function(a){return j(this,a,b)}))}),H.getWeek=function(){return k(x(s,this,!1))},H.getUTCWeek=function(){return k(x(s,this,!0))},H.setWeek=function(a,b){return m(this,a,b,!1),this},H.setUTCWeek=function(a,b){return m(this,a,b,!0),this},H.addWeeks=function(a){return this.addDays(7*Number(a))},H.diffWeeks=function(a){return j(this,a,2)/7},e.parsers=[function(b,c,d){if(b=b.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/)){var e=new a(F(b[1],b[3]?b[3]-1:0,b[5]||1,b[7]||0,b[8]||0,b[10]||0,b[12]?1e3*Number("0."+b[12]):0));return b[13]?b[14]&&e.setUTCMinutes(e.getUTCMinutes()+("-"==b[15]?1:-1)*(60*Number(b[16])+(b[18]?Number(b[18]):0))):c||(e=u(e)),d.setTime(+e)}}],e.parse=function(a){return+e(""+a)},H.toString=function(a,b,c){return a!==d&&r(this)?n(this,a,b,c,f(this)):this[0].toString()},H.toUTCString=H.toGMTString=function(a,b,c){return a!==d&&r(this)?n(this,a,b,c,!0):this[0].toUTCString()},H.toISOString=function(){return this.toUTCString("yyyy-MM-dd'T'HH:mm:ss(.fff)zzz")},e.defaultLocale="",e.locales={"":{monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),amDesignator:"AM",pmDesignator:"PM"}},e.formatters={i:"yyyy-MM-dd'T'HH:mm:ss(.fff)",u:"yyyy-MM-dd'T'HH:mm:ss(.fff)zzz"},z("getTime,valueOf,toDateString,toTimeString,toLocaleString,toLocaleDateString,toLocaleTimeString,toJSON".split(","),function(a){H[a]=function(){return this[0][a]()}}),H.setTime=function(a){return this[0].setTime(a),this},H.valid=w(r),H.clone=function(){return new e(this)},H.clearTime=function(){return this.setHours(0,0,0,0)},H.toDate=function(){return new a(+this[0])},e.now=function(){return+new a},e.today=function(){return(new e).clearTime()},e.UTC=F,e.getDaysInMonth=v,"undefined"!=typeof module&&module.exports&&(module.exports=e),e}(Date,Math,Array);